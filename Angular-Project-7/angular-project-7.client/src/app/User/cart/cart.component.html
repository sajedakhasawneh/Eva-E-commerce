<!--== Wrapper Start ==-->
<div class="wrapper">
  <main class="main-content">
    <!--== Start Page Header Area Wrapper ==-->
    <section class="page-header-area pt-10 pb-9" data-bg-color="#FFF3DA" style="background-color: #FFF3DA; margin-top: 80px">
      <div class="container">
        <div class="row">
          <div class="col-md-5">
            <div class="page-header-st3-content text-center text-md-start">
              <h2 class="page-header-title">Cart</h2>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!--== End Page Header Area Wrapper ==-->
    <!--== Start Product Area Wrapper ==-->
    <section class="section-space">
      <div class="container">
        <div class="shopping-cart-form table-responsive">
          <form action="#" method="post">
            <table class="table text-center">
              <thead>
                <tr>
                  <th class="product-remove">&nbsp;</th>
                  <th class="product-thumbnail">&nbsp;</th>
                  <th class="product-name">Product</th>
                  <th class="product-price">Price</th>
                  <th class="product-quantity">Quantity</th>
                  <th class="product-subtotal">Total</th>
                </tr>
              </thead>
              <tbody>
                <tr class="tbody-item" *ngFor="let item of cartItems">
                  <td class="product-remove">
                    <button class="remove" (click)="removeFromCart(item.id)">Ã—</button>
                  </td>
                  <td class="product-thumbnail">
                    <div class="thumb">
                      <a [routerLink]="['/product', item.productId]">
                        <img [src]="item.imageUrl" width="68" height="84" alt="{{ item.productName }}">
                      </a>
                    </div>
                  </td>
                  <td class="product-name">{{ item.productName }} </td>
                  <td class="product-price">
                    <span class="price">{{item.productPrice | number: '1.2-2'}} JD</span>
                  </td>
                  <td class="product-quantity">
                    <div class="pro-qty">
                      <button class="quantity-btn" (click)="updateQuantity(item, item.quantity - 1)">
                        <i class="fa-solid fa-minus"></i>
                      </button>
                      <input type="text" title="Quantity" [value]="item.quantity" readonly>
                      <button class="quantity-btn" (click)="updateQuantity(item, item.quantity + 1)"><i class="fa-solid fa-plus"></i></button>
                    </div>
                  </td>
                  <td class="product-subtotal">
                    <span class="price">{{ item.productPrice * item.quantity | number: '1.2-2' }} JD</span>
                  </td>
                </tr>
              </tbody>
            </table>
          </form>
        </div>
        <div class="row">
          <div class="col-12 col-lg-6">
            <div class="coupon-wrap">
              <h4 class="title">Coupon</h4>
              <p class="desc">Enter your coupon code if you have one.</p>
              <input type="text" class="form-control" [(ngModel)]="voucherCode" placeholder="Coupon code">
              <button type="button" class="btn-coupon" (click)="applyVoucher()">Apply coupon</button>

              <div *ngIf="appliedVoucher" class="voucher-details" style="margin-top:5% !important">
                <p>Coupon Code: <strong>{{ appliedVoucher.code }}</strong></p>
                <p>Discount: <strong>{{ discount }}%</strong></p>
                <p>Discount Amount: <strong>{{ discountAmount }}</strong></p>
              </div>

              <div *ngIf="errorMessage" class="error-message">
                <p>{{ errorMessage }}</p>
              </div>
            </div>
          </div>

          <div class="col-12 col-lg-6">
            <div class="cart-totals-wrap">
              <h2 class="title">Cart totals</h2>
              <table>
                <tbody>
                  <tr class="cart-subtotal">
                    <th>Subtotal</th>
                    <td><span class="amount">{{ totalPrice | number: '1.2-2'}} JD</span></td>
                  </tr>
                  <tr class="shipping-totals">
                    <th>Shipping Fee</th>
                    <td>
                      <span>0.00 JD</span>
                    </td>
                  </tr>
                  <tr class="cart-subtotal">
                    <th>Discount</th>
                    <td><span class="amount">{{ discountAmount }} JD</span></td>
                  </tr>
                  <tr class="order-total">
                    <th>Total</th>
                    <td><span class="amount">{{ finalTotalPrice | number: '1.2-2'}} JD</span></td>
                  </tr>
                </tbody>
              </table>
              <div class="text-end">
                <button class="checkout-button" (click)="goToCheckout()">
                  Proceed to checkout
                </button>
              </div>
            </div>
          </div>
        </div>

      </div>
    </section>
    <!--== End Product Area Wrapper ==-->
  </main>
</div>
<!--== Wrapper End ==-->
